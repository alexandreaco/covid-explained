<template>
  <div class="container">
    <a href="#" class="site-name">
      <router-link :to="{ name: 'Home' }">
        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
        	 width="351.764px" height="148.9371px" viewBox="0 0 351.764 148.9371" style="enable-background:new 0 0 351.764 148.9371;"
        	 xml:space="preserve">
          <g>
          	<rect  style="fill:#33322D;" width="315" height="93"/>
          </g>
          <g>
          	<g>
          		<path style="fill:#FFFFFF;" d="M61.3965,60.6338c-0.3301,3.4644-1.1553,6.6245-2.4746,9.478
          			c-1.3203,2.854-3.0684,5.2954-5.2461,7.3247s-4.7441,3.5967-7.6963,4.7017c-2.9531,1.105-6.2451,1.6582-9.874,1.6582
          			c-4.3887,0-8.2158-0.8501-11.4824-2.5488c-3.2656-1.6992-5.9883-4.0005-8.1655-6.9043c-2.1777-2.9033-3.811-6.3018-4.8999-10.1953
          			c-1.0889-3.8931-1.6504-8.0503-1.6826-12.4722v-9.8491c0.0322-4.3877,0.6099-8.5371,1.7319-12.4473
          			c1.1216-3.9097,2.7793-7.3247,4.9741-10.2446c2.1943-2.9199,4.9248-5.229,8.1914-6.9287
          			c3.2656-1.6992,7.0596-2.5488,11.3828-2.5488c3.7939,0,7.1758,0.561,10.1455,1.6826c2.9697,1.1221,5.5098,2.7056,7.6221,4.751
          			c2.1113,2.0464,3.7939,4.5371,5.0479,7.4736c1.2539,2.937,2.0615,6.2031,2.4258,9.7993H49.5176
          			c-0.1973-2.1113-0.6016-4.0337-1.2119-5.7661c-0.6113-1.7319-1.4443-3.2168-2.5-4.4541s-2.3838-2.1855-3.9834-2.8457
          			c-1.6006-0.6597-3.4893-0.9897-5.667-0.9897c-2.6729,0-4.917,0.6108-6.7314,1.8311c-1.8145,1.2212-3.2832,2.8628-4.4043,4.9243
          			c-1.1221,2.0625-1.9229,4.4468-2.4004,7.1519c-0.4785,2.7056-0.7178,5.543-0.7178,8.5127v9.9478
          			c0,3.1016,0.2393,6.0132,0.7178,8.7354c0.4775,2.7222,1.2617,5.1064,2.3506,7.1519c1.0889,2.0459,2.541,3.6621,4.3555,4.8501
          			c1.8145,1.1875,4.0742,1.7817,6.7803,1.7817c4.1572,0,7.3252-1.1792,9.5029-3.5386c2.1777-2.3589,3.4639-5.6997,3.8604-10.0225
          			H61.3965z"/>
          	</g>
          	<g>
          		<path style="fill:#FFFFFF;" d="M122.4199,51.3789c0,4.2563-0.5439,8.3394-1.6328,12.249
          			c-1.0889,3.9102-2.7148,7.3584-4.875,10.3442c-2.1611,2.9863-4.8672,5.3618-8.1172,7.1265
          			c-3.25,1.7651-7.0518,2.6479-11.4072,2.6479c-4.3232,0-8.085-0.8906-11.2842-2.6724c-3.2012-1.7817-5.8652-4.165-7.9932-7.1519
          			c-2.1279-2.9858-3.7285-6.4253-4.8008-10.3188c-1.0723-3.8931-1.6084-7.9683-1.6084-12.2246v-9.2056
          			c0-2.8374,0.2393-5.6089,0.7178-8.3149c0.4775-2.7046,1.1875-5.2534,2.1279-7.6465c0.9404-2.3916,2.1113-4.6025,3.5137-6.6318
          			s3.0518-3.769,4.9492-5.2212c1.8975-1.4517,4.042-2.5898,6.4346-3.415c2.3916-0.8242,5.0234-1.2373,7.8936-1.2373
          			c4.3555,0,8.1582,0.8906,11.4082,2.6724c3.249,1.7817,5.9639,4.166,8.1416,7.1519c2.1777,2.9863,3.8105,6.4424,4.8994,10.3687
          			c1.0889,3.9268,1.6328,8.0176,1.6328,12.2739V51.3789z M110.4932,42.0742c-0.0342-2.7051-0.2812-5.3945-0.7432-8.0669
          			c-0.4619-2.6729-1.2373-5.0562-2.3262-7.1519c-1.0889-2.0947-2.5322-3.7939-4.3301-5.0977
          			c-1.7988-1.3032-4.0508-1.9551-6.7559-1.9551c-2.6729,0-4.8916,0.6519-6.6562,1.9551c-1.7656,1.3037-3.168,3.0112-4.207,5.1226
          			c-1.0391,2.1118-1.7656,4.4961-2.1777,7.1514c-0.4131,2.6562-0.6357,5.3374-0.668,8.0425v9.3047
          			c0.0322,2.7056,0.2637,5.3867,0.6924,8.0425c0.4287,2.6562,1.1631,5.0483,2.2031,7.1763
          			c1.0391,2.1279,2.4404,3.8525,4.2061,5.1719c1.7646,1.3203,3.9844,1.98,6.6572,1.98c2.7051,0,4.957-0.6597,6.7559-1.98
          			c1.7979-1.3193,3.2412-3.0352,4.3301-5.147c1.0889-2.1113,1.8564-4.5039,2.3018-7.1763c0.4453-2.6729,0.6836-5.3618,0.7178-8.0674
          			V42.0742z"/>
          	</g>
          	<g>
          		<path style="fill:#FFFFFF;" d="M157.3115,64.6924l14.9961-53.9961h12.9668l-22.2715,72.0605h-11.333l-22.2227-72.0605h12.9668
          			L157.3115,64.6924z"/>
          	</g>
          	<g>
          		<path style="fill:#FFFFFF;" d="M196.8066,10.6963h42.8604v9.8491h-15.5898v52.4121h15.5898v9.7993h-42.8604v-9.7993h15.2432
          			V20.5454h-15.2432V10.6963z"/>
          	</g>
          	<g>
          		<path style="fill:#FFFFFF;" d="M255.4541,82.7568V10.6963h17.6191c4.9492,0.0332,9.3955,0.8584,13.3379,2.4746
          			c3.9424,1.6172,7.292,3.8936,10.0469,6.8301c2.7549,2.937,4.875,6.4424,6.3604,10.5171
          			c1.4844,4.0752,2.2432,8.5869,2.2764,13.5361v5.4438c-0.0332,4.9492-0.792,9.4614-2.2764,13.5361
          			c-1.4854,4.0752-3.5967,7.5723-6.335,10.4922c-2.7393,2.9204-6.0557,5.189-9.9482,6.8052
          			c-3.8936,1.6172-8.2646,2.4253-13.1152,2.4253H255.4541z M267.5303,20.2979v52.9072h5.8896
          			c3.2666-0.0327,6.1201-0.6187,8.5625-1.7573c2.4414-1.1382,4.4785-2.7383,6.1123-4.8008
          			c1.6328-2.0615,2.8535-4.5444,3.6621-7.4482c0.8076-2.9033,1.2285-6.1372,1.2617-9.7007v-5.543
          			c-0.0332-3.4644-0.4541-6.6318-1.2617-9.5024c-0.8086-2.8706-2.0381-5.353-3.6875-7.4487
          			c-1.6504-2.0947-3.7197-3.728-6.2109-4.8994c-2.4922-1.1709-5.4199-1.7734-8.7852-1.8066H267.5303z"/>
          	</g>
          </g>
          <g>
          	<g>
          		<path style="fill:#33322D;" d="M98.8497,122.5439H84.271v11.1226h17.061v4.7705H78.4053V103h22.7563v4.8193H84.271v10.0029h14.5786V122.5439z"/>
          	</g>
          	<g>
          		<path style="fill:#33322D;" d="M119.5621,116.1914L126.3765,103h6.8877l-10.1001,17.5728l10.3438,17.8643h-6.8394l-7.0093-13.4106l-7.0098,13.4106
          			h-6.9121l10.3442-17.8643L106.0054,103h6.8389L119.5621,116.1914z"/>
          	</g>
          	<g>
          		<path style="fill:#33322D;" d="M144.1924,124.856v13.5811h-5.8413V103h11.853c1.7681,0.0166,3.4033,0.2798,4.9043,0.791
          			c1.5005,0.5112,2.7944,1.2412,3.8818,2.1904c1.0869,0.9492,1.9351,2.1016,2.5435,3.4561c0.6084,1.355,0.9126,2.8843,0.9126,4.5879
          			c0,1.6553-0.3042,3.1479-0.9126,4.4785s-1.4565,2.4663-2.5435,3.4072c-1.0874,0.9414-2.3813,1.6636-3.8818,2.166
          			c-1.501,0.5034-3.1362,0.7632-4.9043,0.7788H144.1924z M144.1924,120.1343h6.0117c0.9893,0,1.874-0.1499,2.6528-0.4502
          			c0.7788-0.2998,1.4438-0.7178,1.9956-1.2534c0.5518-0.5352,0.9736-1.1763,1.2656-1.9229c0.292-0.7461,0.4385-1.5576,0.4385-2.4336
          			c0-0.9248-0.1465-1.7769-0.4385-2.5557s-0.7139-1.4482-1.2656-2.0078c-0.5518-0.5601-1.2168-0.9937-1.9956-1.3022
          			c-0.7788-0.3081-1.6636-0.4702-2.6528-0.4868h-6.0117V120.1343z"/>
          	</g>
          	<g>
          		<path style="fill:#33322D;" d="M174.2261,133.6665h16.8911v4.7705h-22.7324V103h5.8413V133.6665z"/>
          	</g>
          	<g>
          		<path  style="fill:#33322D;" d="M214.9205,130.2104h-11.0742l-2.4336,8.2266h-6.0361L206.8887,103h5.1353l11.293,35.437h-6.0112L214.9205,130.2104z
          			 M205.3311,125.2212h8.1289l-4.0156-13.8975L205.3311,125.2212z"/>
          	</g>
          	<g>
          		<path style="fill:#33322D;" d="M228.4283,103h21.0771v4.8433h-7.6665v25.7749h7.6665v4.8188h-21.0771v-4.8188h7.4961v-25.7749h-7.4961V103z"/>
          	</g>
          	<g>
          		<path style="fill:#33322D;" d="M280.4883,138.437h-5.8896l-11.5366-24.3872l-0.0244,24.3872h-5.9141V103h5.9141l11.4878,24.3145L274.5743,103h5.9141
          			V138.437z"/>
          	</g>
          	<g>
          		<path style="fill:#33322D;" d="M308.2344,122.5439h-14.5786v11.1226h17.061v4.7705h-22.9268V103h22.7563v4.8193h-16.8906v10.0029h14.5786V122.5439z"/>
          	</g>
          	<g>
          		<path style="fill:#33322D;" d="M317.0938,138.437V103h8.6646c2.4336,0.0166,4.6201,0.4224,6.5591,1.2168c1.939,0.7954,3.5859,1.915,4.9409,3.3589
          			c1.3545,1.4443,2.397,3.1685,3.1274,5.1719c0.73,2.0044,1.103,4.2227,1.1196,6.6567v2.6772
          			c-0.0166,2.4336-0.3896,4.6528-1.1196,6.6567c-0.7305,2.0039-1.769,3.7236-3.1152,5.1597
          			c-1.3472,1.436-2.978,2.5518-4.8921,3.3467c-1.915,0.7949-4.0645,1.1924-6.4497,1.1924H317.0938z M323.0323,107.7217v26.0181
          			h2.8965c1.606-0.0161,3.0093-0.3042,4.2104-0.8643c1.2007-0.5596,2.2026-1.3467,3.0059-2.3608
          			c0.8032-1.0137,1.4033-2.2349,1.8008-3.6626s0.6045-3.0181,0.6206-4.7705v-2.7261c-0.0161-1.7036-0.2231-3.2612-0.6206-4.6729
          			s-1.002-2.6323-1.813-3.6631c-0.8115-1.0303-1.8296-1.8335-3.0547-2.4092c-1.2251-0.5762-2.665-0.8721-4.3198-0.8887H323.0323z"/>
          	</g>
          </g>
          <g>
          	<path style="fill:#33322D;" d="M351.764,148.9371H67.9056v-56.437H351.764V148.9371z M68.9056,147.9371H350.764v-54.437H68.9056V147.9371z"/>
          </g>
        </svg>
      </router-link>
    </a>

  <div class="nav">
    <ul>
      <li>
        <router-link
          :to="{ name: 'Topic', params: { topicName: 'explainers' } }"
        >
          <span class="explainers bullet"></span> Explainers
        </router-link>
      </li>
      <li>
        <router-link
          :to="{ name: 'Topic', params: { topicName: 'definitions' } }"
        >
           <span class="definitions bullet"></span> Definitions
        </router-link>
      </li>
      <li>
        <a href="#" class="brand-logo">
          <router-link
            :to="{ name: 'Topic', params: { topicName: 'questions' } }"
          >
             <span class="questions bullet"></span> Questions
          </router-link>
        </a>
      </li>
      <li>
        <router-link
          :to="{ name: 'Topic', params: { topicName: 'scenarios' } }"
        >
         <span class="scenarios bullet"></span> Scenarios
        </router-link>
      </li>
      <li>
        <router-link :to="{ name: 'Topic', params: { topicName: 'news' } }">
           <span class="news bullet"></span>   In the News
        </router-link>
      </li>
    </ul>
    <ul>

      <li>
        <a href="#">
          <router-link :to="{ name: 'AboutUs' }">About Us</router-link>
        </a>
      </li>
      <li>
        <a href="#">
          <router-link :to="{ name: 'OurSources' }">Our Sources</router-link>
        </a>
      </li>
      <li>
        <a href="#">
          <router-link :to="{ name: 'ContactUs' }">Contact Us</router-link>
        </a>
      </li>
    </ul>
  </div>


    <ul  class="if-admin">
      <li v-if="!admin">
        <a href="#">
          <router-link
            class="white-text admin-links"
            :to="{ name: 'AdminLogin' }"
            >Admin Log In</router-link
          >
        </a>
      </li>
      <li v-if="admin">
        <a href="#">
          <a class="white-text admin-links" @click="redirectToAddPost"
            >Create New Post</a
          >
        </a>
      </li>
      <li v-if="admin">
        <a href="#">
          <a class="white-text admin-links" @click="logout">Log Out</a>
        </a>
      </li>
    </ul>
  </div>
</template>

<script>
import firebase from 'firebase';
import db from '@/firebase/init';
export default {
  data: () => {
    return {
      admin: null,
      adminFromDb: null,
      isSuperAdmin: false,
      isApproved: false,
    };
  },
  methods: {
    logout() {
      firebase
        .auth()
        .signOut()
        .then(() => {
          this.$router.push({ name: 'AdminLogin' });
        });
    },
    redirectToAddPost() {
      this.$router.push({ name: 'AddPost' });
    },

    checkApprovalStatus(adminId) {
      console.log('adminId:', adminId);
      db.collection('users')
        .doc(adminId)
        .get()
        .then(doc => {
          console.log('doc:', doc.data());
          // let adminFromDb = doc.data();
          // adminFromDb.id = doc.id;
          // this.adminFromDb = adminFromDb;
        })
        .then(() => {
          console.log('this.adminFromDb:', this.adminFromDb);
          // if (this.adminFromDb.isApproved === true) {
          //   this.isApproved = true;
          // }
        });
    },

    checkIfAdminIsSuperAdmin() {
      if (this.admin.email === 'liv@someemail.com') {
        this.isSuperAdmin = true;
      }
    },
  },
  created() {
    //let admin = firebase.auth().currentUser;
    firebase.auth().onAuthStateChanged(admin => {
      if (admin) {
        this.admin = admin;
        console.log('this.admin:', this.admin.id);
        //this.checkApprovalStatus(this.admin.id);
        this.checkIfAdminIsSuperAdmin();
      } else {
        this.admin = null;
      }
    });
  },
};
</script>

<style scoped>
.container .nav{
  position: fixed;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  top: 0;
  right: 0;
  width: 150px;
  padding: 1rem;
  z-index: 1;
  bottom: 0;
}

.container .site-name {
  position:fixed;
  top:20px;
  left:20px;
  padding:0;
  font-size:20px;
  z-index:5;
}

.container .site-name svg{
  width:140px;
  height:auto;
}

.bullet{
  display: inline-block;
  width:10px;
  height:10px;
}

.container .if-admin{
  position: fixed;
  bottom:0px;
  left:0px;
  z-index:5;
}

ul {
  display: flex;
  flex-direction: column;
}

.container li:hover {
  opacity: 0.75;
}
.container li {
  padding: 5px 0px;
  margin: 0;
}
.admin-links {
  font-size: 12px;
  background: #fff;
  padding:1rem;
}
</style>
